import {ProcessorState} from "InputProcessor";
import {InputSource} from "InputSource";
import {Document} from "Nodes";
import {Parser} from "Parser";
import {Assert} from "n4/mangel/assert/Assert";
import {DefaultExtensions} from "Extension";

export public class InProgress {

	parse(s: string): Document {
		
		let processorState = new ProcessorState();
		processorState.addExtensions(new DefaultExtensions().extensions);
		
		let parser = new Parser(processorState);
		let doc = parser.parse(new InputSource("test", s));
		return doc;
	}

	
	@Test
	public test() {
		let ast = this.parse("_hello_\n\nWorld!");
		console.log(ast.toXML());
		let astJSON = ast.stringify();
		Assert.equal(astJSON,
			'{"name":"aspex","nodes":[{"content":"hello"},{"name":"INFO","nodes":[{"content":"word"}]}]}');
	}

}
//right click this module and select "Run As -> Test in Node.js" to see the test results
